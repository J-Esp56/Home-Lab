
_Date: 2025-09-17_

---

## üìå Summary

Re-initialized my homelab into a new network structure. Updated Proxmox and TrueNAS to operate on the secure VLAN (`192.168.1.0/24`). Verified web UI access for both systems, and documented next steps for future VLAN segmentation of vulnerable lab machines.

---

## üñ•Ô∏è Environment / Context

**Device/Server:**
    
    - Proxmox VE host (Ryzen-based PC, NVMe SSD for OS, HDD for storage)
        
    - TrueNAS SCALE server (`hdd-storage`, SMB share `NeloHome`)
        
- **OS/Firmware:**
    
    - Proxmox VE (Latest Stable)
        
    - TrueNAS SCALE (Latest Stable)
        
- **Location:** Home Lab
    

---

## ‚öôÔ∏è Configuration

### Proxmox

- **Management Bridge (vmbr0):**
    
    - IP: `192.168.1.0/24`
        
    - Gateway: `Default`

### TrueNAS

- **Primary Interface (igb0):**
    
    - IP: `192.168.1.0/24`
        
    - Gateway: `Default`
    
- **Shares:**
    
    - `Storage Server` ‚Üí SMB: '`SMB Share`' 
        

### VLANs (current)

- **VLAN 1 (Secure):** `192.168.1.0/24`
    
    - Proxmox host, TrueNAS, core infra
        
- **Planned:**
    
    - VLAN  30 (Vulnerable Lab) ‚Üí for pentest VMs, isolated from Secure VLAN, only reachable via VPN (**Will Setup In The Future See Below**)
        
---

## üîß Steps Taken

1. Edited `/etc/network/interfaces` on Proxmox to move UI from old subnet ‚Üí `192.168.1.0/24`.
    
2. Restarted networking service and reconnected via `https://192.168.1.xx:8006`.
    
3. Updated TrueNAS network settings through console:
    
    - Removed old IP alias.
        
    - Assigned new static IP `192.168.1.xx/24`, gateway `Default`.
        
4. Verified reachability with `ping` and web UI access at `https://192.168.1.xx`.

---

## üö® Troubleshooting / Errors

- ‚ÄúGateway unreachable‚Äù error ‚Üí caused by mismatched subnet (`192.168.86.1 vs 192.168.1.1`). Fixed by assigning gateway on correct VLAN subnet.
    
- Couldn‚Äôt edit TrueNAS ‚Äúprimary IP‚Äù in UI (only aliases) ‚Üí fixed by reassigning interface via console menu. (Deleted Old interface And Enabled DHCP to Re-Assign)
---

## ‚úÖ Outcome

- Proxmox and TrueNAS successfully migrated into the secure VLAN (`192.168.1.0/24`).
    
- Confirmed UI access for both systems.
    
- Clean baseline for homelab expansion into multiple VLANs (secure infra vs vulnerable pentest lab).

---

## üìö References

- Proxmox VE Docs: https://pve.proxmox.com/wiki/Network_Configuration
    
- TrueNAS SCALE Docs: https://www.truenas.com/docs/
---

## üîÑ Corrections / Future Plans

- Implement internal DNS resolver (Pi-hole / Unbound) for clean hostnames.
    
- Create additional Proxmox bridge (`vmbr1`) tagged for VLAN 30 (pentest VLAN).
- Configure VPN access to VLAN 30
    
- Write firewall rules on UniFi gateway to enforce isolation between VLANs.
